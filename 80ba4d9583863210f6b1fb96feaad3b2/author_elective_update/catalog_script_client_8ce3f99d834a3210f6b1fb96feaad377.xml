<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="catalog_script_client">
    <catalog_script_client action="DELETE">
        <active>false</active>
        <applies_catalog>true</applies_catalog>
        <applies_extended>false</applies_extended>
        <applies_req_item>false</applies_req_item>
        <applies_sc_task>false</applies_sc_task>
        <applies_target_record>false</applies_target_record>
        <applies_to>item</applies_to>
        <cat_item display_value="æ”¯æ´ãƒªã‚¯ã‚¨ã‚¹ãƒˆ">2dd8915983c63210f6b1fb96feaad377</cat_item>
        <cat_variable>IO:e1b26595830a3210f6b1fb96feaad31b</cat_variable>
        <condition/>
        <description/>
        <field/>
        <global>true</global>
        <isolate_script>false</isolate_script>
        <messages/>
        <name>Kokoro Ambient Reactor</name>
        <order/>
        <published_ref/>
        <script><![CDATA[function onChange(control, oldValue, newValue, isLoading) {
    if (isLoading) {
        return;
    }

    // --- ]]>ğŸ›¡<![CDATA[ï¸ å®‰å…¨å±‚ï¼šä½¿ç”¨ try-catch é˜²æ­¢æŠ¥é”™å¼¹çª— ---
    try {
        // 1. å®‰å…¨è·å–æ–‡å­— (é˜²æ­¢ newValue ä¸ºç©ºæ—¶æŠ¥é”™)
        var text = (newValue || '').toLowerCase();

        // 2. è·å–å…ƒç´ 
        // âš ï¸ è¯·ç¡®ä¿è¿™é‡Œ 'wish' å’Œä½ ä¹‹å‰å®šä¹‰çš„é—®é¢˜ Name ä¸€è‡´
        // å¦‚æœä½ çš„å˜é‡åæ˜¯ u_wish_contentï¼Œè¯·åœ¨è¿™é‡Œæ”¹ä¸º 'u_wish_content'
        var el = g_form.getControl('wish');

        // å¦‚æœæ‰¾ä¸åˆ°å…ƒç´ ï¼ˆæ¯”å¦‚åœ¨ç§»åŠ¨ç«¯åŠ è½½æ…¢ï¼‰ï¼Œç›´æ¥é€€å‡ºï¼Œä¸æŠ¥é”™
        if (!el) {
            return;
        }

        // 3. å®šä¹‰å…³é”®è¯
        var urgentWords = ['ç—›', 'è¡€', 'æ€¥', 'æ•‘', 'æ­»', 'ä¼¤', 'help', 'pain', 'æ€ªæˆ‘'];
        var warmWords = ['å†·', 'å¯’', 'é¥¿', 'æ¸´', 'æ°´', 'è¯', 'è¢«', 'cold', 'water', 'é£Ÿ'];

        // 4. æ£€æµ‹åŒ¹é…
        var isUrgent = urgentWords.some(function(word) { return text.indexOf(word) > -1; });
        var isWarm = warmWords.some(function(word) { return text.indexOf(word) > -1; });

        // 5. æ‰§è¡Œåˆ‡æ¢ (ä½¿ç”¨åŸç”Ÿ JS classListï¼Œä¸ä¾èµ– jQuery $)
        // å…ˆç§»é™¤æ‰€æœ‰å¯èƒ½çš„ç‰¹æ•ˆï¼Œå›å½’ç™½æ¿
        el.classList.remove('kokoro-urgent', 'kokoro-warm');

        if (isUrgent) {
            el.classList.add('kokoro-urgent');
        } else if (isWarm) {
            el.classList.add('kokoro-warm');
        }
        
    } catch (e) {
        // å¦‚æœçœŸçš„å‘ç”ŸæœªçŸ¥é”™è¯¯ï¼Œæ‚„æ‚„æ‰“å°åˆ°æ§åˆ¶å°ï¼Œä¸è¦å¼¹çº¢æ¡†å“ç”¨æˆ·
        console.log('Kokoro Script Warning: ' + e.message);
    }
}]]></script>
        <sys_class_name>catalog_script_client</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-12-25 08:47:20</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>8ce3f99d834a3210f6b1fb96feaad377</sys_id>
        <sys_mod_count>5</sys_mod_count>
        <sys_name>Kokoro Ambient Reactor</sys_name>
        <sys_overrides/>
        <sys_package display_value="Kokoro Shelter" source="x_1821654_kokoro_0">80ba4d9583863210f6b1fb96feaad3b2</sys_package>
        <sys_policy/>
        <sys_scope display_value="Kokoro Shelter">80ba4d9583863210f6b1fb96feaad3b2</sys_scope>
        <sys_update_name>catalog_script_client_8ce3f99d834a3210f6b1fb96feaad377</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-12-26 07:14:03</sys_updated_on>
        <table/>
        <type>onChange</type>
        <ui_type>10</ui_type>
        <va_supported>true</va_supported>
        <variable_set/>
        <view/>
    </catalog_script_client>
    <sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="Kokoro Shelter">80ba4d9583863210f6b1fb96feaad3b2</application>
        <file_path/>
        <instance_id>26f701431b4a8650168f4089bd4bcbef</instance_id>
        <instance_name>dev269536</instance_name>
        <name>catalog_script_client_8ce3f99d834a3210f6b1fb96feaad377</name>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update sys_domain="global" table="catalog_script_client"&gt;&lt;catalog_script_client action="INSERT_OR_UPDATE"&gt;&lt;active&gt;false&lt;/active&gt;&lt;applies_catalog&gt;true&lt;/applies_catalog&gt;&lt;applies_extended&gt;false&lt;/applies_extended&gt;&lt;applies_req_item&gt;false&lt;/applies_req_item&gt;&lt;applies_sc_task&gt;false&lt;/applies_sc_task&gt;&lt;applies_target_record&gt;false&lt;/applies_target_record&gt;&lt;applies_to&gt;item&lt;/applies_to&gt;&lt;cat_item display_value="æ”¯æ´ãƒªã‚¯ã‚¨ã‚¹ãƒˆ"&gt;2dd8915983c63210f6b1fb96feaad377&lt;/cat_item&gt;&lt;cat_variable&gt;IO:e1b26595830a3210f6b1fb96feaad31b&lt;/cat_variable&gt;&lt;condition/&gt;&lt;description/&gt;&lt;field/&gt;&lt;global&gt;true&lt;/global&gt;&lt;isolate_script&gt;false&lt;/isolate_script&gt;&lt;messages/&gt;&lt;name&gt;Kokoro Ambient Reactor&lt;/name&gt;&lt;order/&gt;&lt;published_ref/&gt;&lt;script&gt;&lt;![CDATA[function onChange(control, oldValue, newValue, isLoading) {
    if (isLoading) {
        return;
    }

    // --- ]]&gt;ğŸ›¡&lt;![CDATA[ï¸ å®‰å…¨å±‚ï¼šä½¿ç”¨ try-catch é˜²æ­¢æŠ¥é”™å¼¹çª— ---
    try {
        // 1. å®‰å…¨è·å–æ–‡å­— (é˜²æ­¢ newValue ä¸ºç©ºæ—¶æŠ¥é”™)
        var text = (newValue || '').toLowerCase();

        // 2. è·å–å…ƒç´ 
        // âš ï¸ è¯·ç¡®ä¿è¿™é‡Œ 'wish' å’Œä½ ä¹‹å‰å®šä¹‰çš„é—®é¢˜ Name ä¸€è‡´
        // å¦‚æœä½ çš„å˜é‡åæ˜¯ u_wish_contentï¼Œè¯·åœ¨è¿™é‡Œæ”¹ä¸º 'u_wish_content'
        var el = g_form.getControl('wish');

        // å¦‚æœæ‰¾ä¸åˆ°å…ƒç´ ï¼ˆæ¯”å¦‚åœ¨ç§»åŠ¨ç«¯åŠ è½½æ…¢ï¼‰ï¼Œç›´æ¥é€€å‡ºï¼Œä¸æŠ¥é”™
        if (!el) {
            return;
        }

        // 3. å®šä¹‰å…³é”®è¯
        var urgentWords = ['ç—›', 'è¡€', 'æ€¥', 'æ•‘', 'æ­»', 'ä¼¤', 'help', 'pain', 'æ€ªæˆ‘'];
        var warmWords = ['å†·', 'å¯’', 'é¥¿', 'æ¸´', 'æ°´', 'è¯', 'è¢«', 'cold', 'water', 'é£Ÿ'];

        // 4. æ£€æµ‹åŒ¹é…
        var isUrgent = urgentWords.some(function(word) { return text.indexOf(word) &gt; -1; });
        var isWarm = warmWords.some(function(word) { return text.indexOf(word) &gt; -1; });

        // 5. æ‰§è¡Œåˆ‡æ¢ (ä½¿ç”¨åŸç”Ÿ JS classListï¼Œä¸ä¾èµ– jQuery $)
        // å…ˆç§»é™¤æ‰€æœ‰å¯èƒ½çš„ç‰¹æ•ˆï¼Œå›å½’ç™½æ¿
        el.classList.remove('kokoro-urgent', 'kokoro-warm');

        if (isUrgent) {
            el.classList.add('kokoro-urgent');
        } else if (isWarm) {
            el.classList.add('kokoro-warm');
        }
        
    } catch (e) {
        // å¦‚æœçœŸçš„å‘ç”ŸæœªçŸ¥é”™è¯¯ï¼Œæ‚„æ‚„æ‰“å°åˆ°æ§åˆ¶å°ï¼Œä¸è¦å¼¹çº¢æ¡†å“ç”¨æˆ·
        console.log('Kokoro Script Warning: ' + e.message);
    }
}]]&gt;&lt;/script&gt;&lt;sys_class_name&gt;catalog_script_client&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2025-12-25 08:47:20&lt;/sys_created_on&gt;&lt;sys_domain&gt;global&lt;/sys_domain&gt;&lt;sys_domain_path&gt;/&lt;/sys_domain_path&gt;&lt;sys_id&gt;8ce3f99d834a3210f6b1fb96feaad377&lt;/sys_id&gt;&lt;sys_mod_count&gt;5&lt;/sys_mod_count&gt;&lt;sys_name&gt;Kokoro Ambient Reactor&lt;/sys_name&gt;&lt;sys_overrides/&gt;&lt;sys_package display_value="Kokoro Shelter" source="x_1821654_kokoro_0"&gt;80ba4d9583863210f6b1fb96feaad3b2&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Kokoro Shelter"&gt;80ba4d9583863210f6b1fb96feaad3b2&lt;/sys_scope&gt;&lt;sys_update_name&gt;catalog_script_client_8ce3f99d834a3210f6b1fb96feaad377&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2025-12-26 07:14:03&lt;/sys_updated_on&gt;&lt;table/&gt;&lt;type&gt;onChange&lt;/type&gt;&lt;ui_type&gt;10&lt;/ui_type&gt;&lt;va_supported&gt;true&lt;/va_supported&gt;&lt;variable_set/&gt;&lt;view/&gt;&lt;/catalog_script_client&gt;&lt;/record_update&gt;</payload>
        <payload_hash>1712002523</payload_hash>
        <record_name>Kokoro Ambient Reactor</record_name>
        <reverted_from/>
        <source>48ba4d9583863210f6b1fb96feaad3b6</source>
        <source_table>sys_update_set</source_table>
        <state>previous</state>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-12-26 07:14:03</sys_created_on>
        <sys_id>3f886ea98382b210f6b1fb96feaad383</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_recorded_at>19b5981e3360000001</sys_recorded_at>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-12-26 07:14:03</sys_updated_on>
        <type>Catalog Client Scripts</type>
        <update_guid>b3886ea9c382b21054ef84a746591983</update_guid>
        <update_guid_history>b3886ea9c382b21054ef84a746591983:1712002523,f68226a14682b21037098da6c94145fa:1907448728,aee7426dc3ce72108d3d93c87419f1df:-565202654,f17cc9ed2e8a72105215e81035e8811b:-1490245465,b355b911d18a3210a697fdc64a4414f4:-336304717,2054f1dd134a32107c6c987ec53b22e4:-1536247880</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete display_value="Kokoro Ambient Reactor">47092ee98382b210f6b1fb96feaad3a2</sys_audit_delete>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2025-12-26 07:16:10</sys_created_on>
        <sys_db_object display_value="" name="catalog_script_client">catalog_script_client</sys_db_object>
        <sys_id>20bb410b1d8a4fccbf673138baed48b9</sys_id>
        <sys_metadata>8ce3f99d834a3210f6b1fb96feaad377</sys_metadata>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Kokoro Ambient Reactor</sys_name>
        <sys_package display_value="Kokoro Shelter" source="x_1821654_kokoro_0">80ba4d9583863210f6b1fb96feaad3b2</sys_package>
        <sys_parent/>
        <sys_policy/>
        <sys_scope display_value="Kokoro Shelter">80ba4d9583863210f6b1fb96feaad3b2</sys_scope>
        <sys_scope_delete display_value="">b5b651695bd14f99aee30f38068ac3c1</sys_scope_delete>
        <sys_update_name>catalog_script_client_8ce3f99d834a3210f6b1fb96feaad377</sys_update_name>
        <sys_update_version display_value="catalog_script_client_8ce3f99d834a3210f6b1fb96feaad377">3f886ea98382b210f6b1fb96feaad383</sys_update_version>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2025-12-26 07:16:10</sys_updated_on>
    </sys_metadata_delete>
</record_update>
